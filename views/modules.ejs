<% title = subject + " - " + type + " (" + difficulty + ")" %>

<div class="container my-4">
  <!-- Page Header -->
  <div class="text-center mb-4">
    <h2 class="fw-bold"><%= subject %> - <%= type %> (<%= difficulty %>)</h2>
    <p class="text-muted">Answer the following questions and test your knowledge.</p>
  </div>

  <!-- Difficulty Tabs -->
  <% const difficulties = ["Easy", "Medium", "Hard"]; %>
  <ul class="nav nav-tabs mb-4 justify-content-center">
    <% difficulties.forEach(diff => { %>
      <li class="nav-item">
        <a class="nav-link <%= diff === difficulty ? 'active' : '' %>" 
           href="/modules/<%= subject %>/MCQ/<%= diff %>"><%= diff %></a>
      </li>
    <% }) %>
  </ul>

  <!-- Question Form -->
  <form id="mcqForm" action="/modules/<%= subject %>/<%= type %>/<%= difficulty %>" method="POST">
    <% questions.forEach((q, index) => { %>
      <div class="card shadow-sm mb-4 border-0 position-relative">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-start mb-2">
            <h5 class="fw-bold">Q<%= index + 1 %>. <%= q.question %></h5>
            <!-- Bookmark Icon -->
            <i class="bi bi-star fs-4 text-warning bookmark" 
               style="cursor:pointer;" 
               data-question-id="<%= q.id %>"></i>
          </div>

       <% q.options.forEach((opt, i) => { %>
  <div class="form-check">
    <input class="form-check-input" type="radio" 
           name="q<%= q.id %>" 
           value="<%= opt %>" 
           id="q<%= q.id %>opt<%= i %>">
    <label class="form-check-label" for="q<%= q.id %>opt<%= i %>">
      <%= opt %>
    </label>
  </div>
<% }) %>


          <% if (q.explanation) { %>
            <div class="alert alert-info mt-2">
              <strong>Hint/Explanation:</strong> <%= q.explanation %>
            </div>
          <% } %>
        </div>
      </div>
    <% }) %>

    <div class="text-center mb-5">
      <button type="submit" class="btn btn-warning px-4">Submit Answers</button>
    </div>
  </form>
</div>

<script>
  // Bookmark toggle
  document.querySelectorAll('.bookmark').forEach(star => {
    star.addEventListener('click', () => {
      star.classList.toggle('bi-star');
      star.classList.toggle('bi-star-fill');
      const qId = star.dataset.questionId;
      console.log("Toggled bookmark for question:", qId);
      // Optional: AJAX call to save bookmark in DB
    });
  });

</script>

<style>
  /* Difficulty Tabs */
  .nav-tabs {
    justify-content: center;
    border-bottom: 2px solid #ddd;
  }

  .nav-tabs .nav-link {
    color: #555; /* dark grey for inactive */
    font-weight: 500;
    margin: 0 5px;
    border: 1px solid transparent;
    border-radius: 8px 8px 0 0;
    background-color: var(--light-bg);
    transition: all 0.3s ease;
  }

  .nav-tabs .nav-link:hover {
    color: var(--primary-blue);
    background-color: #e0e0e0;
  }

  .nav-tabs .nav-link.active {
    color: #fff !important;
    background-color: var(--primary-blue);
    border-color: var(--primary-blue) !important;
    font-weight: 600;
  }

  /* Optional: color coding by difficulty */
  .nav-tabs .nav-link.easy { background-color: #43a047; color: #fff; }
  .nav-tabs .nav-link.medium { background-color: #f9a825; color: #000; }
  .nav-tabs .nav-link.hard { background-color: #c62828; color: #fff; }
  .nav-tabs .nav-link:hover { opacity: 0.85; }

  /* Bookmark hover */
  .bookmark:hover { transform: scale(1.2); transition: transform 0.2s; }

  /* Options spacing */
  .form-check { margin-bottom: 0.5rem; }
</style>
















